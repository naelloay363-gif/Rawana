<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>روانا شوز – نظام محاسبة</title>

<style>
body{
  margin:0;
  font-family:system-ui;
  background:#f4f6f8;
}
header{
  background:#2b7bff;
  color:#fff;
  padding:15px;
  text-align:center;
}
.tabs{
  display:flex;
  gap:8px;
  padding:10px;
  overflow-x:auto;
  background:#2b7bff;
}
.tab{
  padding:8px 14px;
  border-radius:20px;
  background:rgba(255,255,255,.25);
  color:#fff;
  cursor:pointer;
  white-space:nowrap;
  user-select:none;
}
.tab.active{
  background:#fff;
  color:#2b7bff;
  font-weight:bold;
}
.section{
  display:none;
  padding:15px;
}
.section.active{
  display:block;
}
.card{
  background:#fff;
  border-radius:12px;
  padding:15px;
}
input,select,button{
  width:100%;
  padding:10px;
  margin:5px 0;
  border-radius:8px;
  border:1px solid #ddd;
}
button{
  background:#2b7bff;
  color:#fff;
  border:none;
  cursor:pointer;
}
button.danger{
  background:#e74c3c;
}
</style>
</head>

<body>

<header>
  <h3>روانا شوز – نظام محاسبة ومخزن</h3>
  <small>أوفلاين • كاش + بنك • شيكل ₪</small>
</header>

<div class="tabs">
  <div class="tab active" onclick="showTab('sales')">مبيعات</div>
  <div class="tab" onclick="showTab('store')">المخزن</div>
  <div class="tab" onclick="showTab('expenses')">مصروفات</div>
  <div class="tab" onclick="showTab('cash')">الصندوق</div>
  <div class="tab" onclick="showTab('reports')">تقارير</div>
</div>

<!-- المبيعات -->
<div id="sales" class="section active">
  <div class="card">
    <h4>شاشة المبيعات</h4>
    <select id="saleItem"></select>
    <input type="number" id="saleQty" placeholder="الكمية" value="1">
    <input type="number" id="salePrice" placeholder="سعر البيع">
    <button onclick="addSale()">إضافة</button>
  </div>
</div>

<!-- المخزن -->
<div id="store" class="section">
  <div class="card">
    <h4>المخزن</h4>
    <input id="itemName" placeholder="اسم الصنف">
    <input id="itemQty" type="number" placeholder="الكمية">
    <button onclick="addItem()">حفظ الصنف</button>
    <ul id="storeList"></ul>
  </div>
</div>

<!-- مصروفات -->
<div id="expenses" class="section">
  <div class="card">
    <h4>مصروفات</h4>
    <input id="expNote" placeholder="الوصف">
    <input id="expAmount" type="number" placeholder="المبلغ">
    <button onclick="addExpense()">تسجيل</button>
  </div>
</div>

<!-- الصندوق -->
<div id="cash" class="section">
  <div class="card">
    <h4>الصندوق</h4>
    <p id="cashTotal">الرصيد: 0 ₪</p>
  </div>
</div>

<!-- تقارير -->
<div id="reports" class="section">
  <div class="card">
    <h4>تقارير</h4>
    <p>عدد الأصناف: <span id="repItems">0</span></p>
    <p>إجمالي المصروفات: <span id="repExp">0</span> ₪</p>
  </div>
</div>

<script>
let store = JSON.parse(localStorage.getItem("store")||"[]");
let expenses = JSON.parse(localStorage.getItem("expenses")||"[]");
let cash = Number(localStorage.getItem("cash")||0);

function showTab(id){
  document.querySelectorAll(".tab").forEach(t=>t.classList.remove("active"));
  document.querySelectorAll(".section").forEach(s=>s.classList.remove("active"));
  document.querySelector(`[onclick="showTab('${id}')"]`).classList.add("active");
  document.getElementById(id).classList.add("active");
}

function save(){
  localStorage.setItem("store",JSON.stringify(store));
  localStorage.setItem("expenses",JSON.stringify(expenses));
  localStorage.setItem("cash",cash);
  render();
}

function render(){
  // store
  let ul=document.getElementById("storeList");
  let sel=document.getElementById("saleItem");
  ul.innerHTML="";
  sel.innerHTML="<option>اختر الصنف</option>";
  store.forEach(s=>{
    ul.innerHTML+=`<li>${s.name} - ${s.qty}</li>`;
    sel.innerHTML+=`<option value="${s.name}">${s.name}</option>`;
  });

  document.getElementById("cashTotal").innerText=`الرصيد: ${cash} ₪`;
  document.getElementById("repItems").innerText=store.length;
  document.getElementById("repExp").innerText=expenses.reduce((a,b)=>a+b.amount,0);
}

function addItem(){
  store.push({name:itemName.value,qty:+itemQty.value});
  itemName.value=itemQty.value="";
  save();
}

function addSale(){
  let i=store.find(s=>s.name==saleItem.value);
  if(!i)return alert("اختر صنف");
  let q=+saleQty.value;
  let p=+salePrice.value;
  if(i.qty<q)return alert("الكمية غير كافية");
  i.qty-=q;
  cash+=q*p;
  save();
}

function addExpense(){
  expenses.push({note:expNote.value,amount:+expAmount.value});
  cash-=+expAmount.value;
  expNote.value=expAmount.value="";
  save();
}

render();
</script>

</body>
</html>
