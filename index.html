<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
_toggle
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ุฑูุงูุง ุดูุฒ</title>

<style>
*{box-sizing:border-box;font-family:tahoma}
body{margin:0;background:#f2f4f7}
header{background:#2f80ed;color:#fff;padding:12px;text-align:center}
#tabs{display:flex;gap:6px;padding:8px;overflow-x:auto;background:#2f80ed}
.tab{padding:8px 14px;background:#ffffff55;border-radius:18px;color:#fff;font-size:14px;cursor:pointer}
.tab.active{background:#fff;color:#2f80ed;font-weight:bold}
.section{display:none;padding:10px}
.section.active{display:block}
.card{background:#fff;padding:12px;border-radius:14px;margin-bottom:10px}
input,select,button,textarea{
  width:100%;padding:10px;margin-top:6px;
  font-size:15px;border-radius:10px;border:1px solid #ccc
}
textarea{resize:none}
button{background:#2f80ed;color:#fff;border:none;font-weight:bold}
.green{background:#27ae60}
.red{background:#eb5757}
.gray{background:#555}
.row{display:flex;gap:6px}
.row>*{flex:1}
small{color:#666}
hr{border:none;border-top:1px solid #eee;margin:10px 0}
</style>
</head>

<body>

<header>
<h3>ุฑูุงูุง ุดูุฒ</h3>
<small>ูุธุงู ูุญุงุณุจุฉ ููุฎุฒู โ ุดููู โช</small>
</header>

<div id="tabs">
  <div class="tab active" onclick="show('sales',this)">ูุจูุนุงุช</div>
  <div class="tab" onclick="show('stock',this)">ุงููุฎุฒู</div>
  <div class="tab" onclick="show('expenses',this)">ูุตุฑููุงุช</div>
  <div class="tab" onclick="show('cashbox',this)">ุงูุตูุฏูู</div>
  <div class="tab" onclick="show('reports',this)">ุชูุงุฑูุฑ</div>
</div>

<!-- ุงููุจูุนุงุช -->
<div id="sales" class="section active">
<div class="card">
<h4>ุจูุน</h4>
<select id="saleItem"></select>
<div class="row">
<input type="number" id="saleQty" placeholder="ุงููููุฉ" value="1">
<input type="number" id="salePrice" placeholder="ุงูุณุนุฑ (ุงุฎุชูุงุฑู)">
</div>
<select id="salePay">
<option value="cash">ูุงุด</option>
<option value="bank">ุจูู</option>
</select>
<textarea id="saleNote" placeholder="ููุงุญุธุงุช (ุงุฎุชูุงุฑู)"></textarea>
<button class="green" onclick="addSale()">ุชูููุฐ ุงูุจูุน</button>
</div>
</div>

<!-- ุงููุฎุฒู -->
<div id="stock" class="section">
<div class="card">
<h4>ุฅุถุงูุฉ ุตูู</h4>
<input id="itemName" placeholder="ุงุณู ุงูุตูู">
<input type="number" id="itemQty" placeholder="ุงููููุฉ">
<input type="number" id="itemPrice" placeholder="ุณุนุฑ ุงูุจูุน">
<button onclick="addItem()">ุญูุธ</button>
</div>
</div>

<!-- ุงููุตุฑููุงุช -->
<div id="expenses" class="section">
<div class="card">
<h4>ูุตุฑูู</h4>
<input id="expName" placeholder="ุงูุณุจุจ">
<input type="number" id="expAmount" placeholder="ุงููุจูุบ">
<select id="expPay">
<option value="cash">ูุงุด</option>
<option value="bank">ุจูู</option>
</select>
<textarea id="expNote" placeholder="ููุงุญุธุงุช (ุงุฎุชูุงุฑู)"></textarea>
<button class="red" onclick="addExpense()">ุชุณุฌูู ุงููุตุฑูู</button>
</div>
</div>

<!-- ุงูุตูุฏูู -->
<div id="cashbox" class="section">
<div class="card">
<h4>ุงูุตูุฏูู</h4>
<p>๐ต ูุงุด: โช <b id="cashTotal">0</b></p>
<p>๐ฆ ุจูู: โช <b id="bankTotal">0</b></p>
</div>
</div>

<!-- ุงูุชูุงุฑูุฑ -->
<div id="reports" class="section">
<div class="card">
<h4>ุชูุงุฑูุฑ</h4>

<input type="date" id="repDate">
<button onclick="dailyReport()">ุชูุฑูุฑ ูููู</button>

<hr>

<input type="month" id="repMonth">
<button onclick="monthlyReport()">ุชูุฑูุฑ ุดูุฑู</button>

<hr>

<div id="repResult"></div>

<button onclick="printPDF()">๐ ุญูุธ PDF</button>
</div>
</div>

<script>
let stock = JSON.parse(localStorage.stock||"[]");
let sales = JSON.parse(localStorage.sales||"[]");
let expenses = JSON.parse(localStorage.expenses||"[]");
let cash = +localStorage.cash||0;
let bank = +localStorage.bank||0;

function save(){
 localStorage.stock=JSON.stringify(stock);
 localStorage.sales=JSON.stringify(sales);
 localStorage.expenses=JSON.stringify(expenses);
 localStorage.cash=cash;
 localStorage.bank=bank;
 load();
}

function show(id,el){
 document.querySelectorAll('.section').forEach(s=>s.classList.remove('active'));
 document.querySelectorAll('.tab').forEach(t=>t.classList.remove('active'));
 document.getElementById(id).classList.add('active');
 el.classList.add('active');
}

function load(){
 let s=document.getElementById("saleItem");
 s.innerHTML="";
 stock.forEach((i,n)=>{
  s.innerHTML+=`<option value="${n}">${i.name} (${i.qty})</option>`;
 });
 cashTotal.innerText=cash;
 bankTotal.innerText=bank;
}

function addItem(){
 if(!itemName.value)return alert("ุฃุฏุฎู ุงุณู ุงูุตูู");
 stock.push({name:itemName.value,qty:+itemQty.value,price:+itemPrice.value});
 save(); alert("ุชู ุญูุธ ุงูุตูู");
}

function addSale(){
 let i=stock[saleItem.value];
 let q=+saleQty.value;
 let p=salePrice.value||i.price;
 if(i.qty<q)return alert("ุงููููุฉ ุบูุฑ ูุงููุฉ");
 i.qty-=q;
 let total=q*p;
 if(salePay.value=="cash") cash+=total; else bank+=total;
 sales.push({name:i.name,qty:q,price:p,pay:salePay.value,note:saleNote.value,date:new Date().toISOString().slice(0,10)});
 save(); alert("ุชู ุงูุจูุน");
}

function addExpense(){
 let a=+expAmount.value;
 if(expPay.value=="cash") cash-=a; else bank-=a;
 expenses.push({name:expName.value,amount:a,pay:expPay.value,note:expNote.value,date:new Date().toISOString().slice(0,10)});
 save(); alert("ุชู ุชุณุฌูู ุงููุตุฑูู");
}

function dailyReport(){
 let d=repDate.value;
 let s=sales.filter(x=>x.date==d).reduce((t,x)=>t+x.qty*x.price,0);
 let e=expenses.filter(x=>x.date==d).reduce((t,x)=>t+x.amount,0);
 repResult.innerHTML=`๐ ${d}<br>ูุจูุนุงุช: โช ${s}<br>ูุตุฑููุงุช: โช ${e}<br>ุงูุตุงูู: โช ${s-e}`;
}

function monthlyReport(){
 let m=repMonth.value;
 let s=sales.filter(x=>x.date.startsWith(m)).reduce((t,x)=>t+x.qty*x.price,0);
 let e=expenses.filter(x=>x.date.startsWith(m)).reduce((t,x)=>t+x.amount,0);
 repResult.innerHTML=`๐ ${m}<br>ูุจูุนุงุช: โช ${s}<br>ูุตุฑููุงุช: โช ${e}<br>ุงูุตุงูู: โช ${s-e}`;
}

function printPDF(){
 let w=window.open("");
 w.document.write("<h3>ุชูุฑูุฑ ุฑูุงูุง ุดูุฒ</h3>");
 w.document.write(repResult.innerHTML);
 w.print();
}

load();
</script>

</body>
  </html>
